# Template Method

---

***동일한 구조/절차가 반복적으로 일어나는가 : 템플릿 메소드 패턴을 고려할 것***

## Situation

* DB, LDAP 를 통한 인증을 거치는 경우
* 대부분의 인증 절차의 실행 과정이나 단계는 일부 구현을 제외하고 거의 유사한 절차를 거치게 됨

## Template Method

일반적으로 템플릿 메소드 패턴은 다음 두 가지로 구성됨

* 실행 과정을 구현한 상위 클래스
* 실행 과정의 일부 단계를 구현한 하위 클래스

여기서 상위 클래스는 실행 과정을 구현한 메소드를 제공 <br>
이 메소드는 기능을 구현하는데 필요한 각 단계를 정의 <br>
이 중 일부 단계는 추상 메소드를 호출하는 방식으로 구현 <br>
이때 추상 메소드는 구현이 다른 단계에 해당됨

## Super Class : 흐름 제어 주체

* 템플릿 메소드의 특징은 하위 타입가 아닌 상위 타입에서 흐름 제어를 한다는 것
* 일반적으로는 하위 타입이 상위 타입의 기능을 재사용할지 여부를 결정
* 하위 타입에서 재정의하여 세부 구현하려면 protected 로 접근 제어하여 abstract 로 넘겨줌
* 구현의 역전(?) 정도로 생각하면 됨

## Strategy & Template Method

* 템플릿 메소드와 전략 패턴을 함께 사용하면, 상속이 아닌 조합(조립)에 기반을 둔 템플릿 메소드를 활용할 수 있음
* 이는 상속에 기반을 둔 템플릿 메소드 구현과 비교해서 유연함을 가짐

대표적으로 Spring 에서 Template 으로 끝나는 클래스들이 있음 cf. Mybatis-Spring 의 SqlSessionTemplate, TransactionTemplate

### Inheritance VS Composition

* 하위 타입이 재정의하여 메소드를 호출 : Inheritance
* 파라미터로 전달받은 객체의 Operation 을 호출 : Composition